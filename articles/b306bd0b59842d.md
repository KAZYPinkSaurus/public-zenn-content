---
title: "シリーズCに向けたエンジニアリングの土台整備（GitHub移行 / IaC / CI/CD / ADR）"
emoji: "🦖"
type: "idea" # tech: 技術記事 / idea: アイデア
topics: ["optfit", "devops", "terraform", "githubactions", "adr"]
published: false
publication_name: "optfit_tech"
---

こんにちは。OptFitでエンジニアをしているKAZYです。  
前回の記事から半年ほど空いてしまいました。

https://zenn.dev/optfit_tech/articles/aa834f19c46f77

2025年、OptFitは創業5年を迎え、シリーズBの資金調達も行いました。  
https://optfit.jp/sss/seriesb

私は2025年5月に入社しました。  
入社してすぐ感じたのは、**「これからシリーズCを目指すフェーズに向けて、エンジニアリング組織の足腰をそろそろ本気で整えないといけない」** という危機感でした。

今年の会社全体の目標として「守りに力を入れる」が掲げられており、開発もそれに呼応する形で、  
短期的には見えにくいけれど、1〜2年後に大きな障壁になりうる課題に向き合う時間を取りました。

この記事では、2025年に開発部門全体で進めてきた「守りの基盤整備」を、  
なぜやったか／どうやったか／何が変わったか、という観点でまとめます。

<!-- 画像①ここ：会社フェーズ/今年のテーマを一目で示す -->
<!-- 内容指示：
OptFitの2025年の位置づけを示す簡単な図。
例）「創業5年 / Series B / 次はSeries C」＋「2025は守り=土台整備」みたいな1枚絵のタイムライン。
シンプルでOK。Notionの図でも、スライド1枚でも可。 -->
<!-- 例：
![OptFitのフェーズと2025のテーマ](https://...png)
-->

---

## 入社時に見えた課題（なぜやる必要があったか）

入社当時、まず目についた課題はざっくり以下のようなものでした。

- **システムの全体像が把握しづらい**  
  新規参加者が「まず何を触っていいか」を判断しづらく、着手までに時間がかかっていました。  
  新メンバーが入るたびにアーキテクチャ説明会を開く必要があり、オンボーディングが属人的になっていました。

- **設計思想や方針がドキュメント化されていない**  
  議論が毎回リセットされ、過去の決定理由が追えない。  
  時間が経つと「なぜそうしたか」が忘れられ、結果として意思決定が風化してしまうケースが多発していました。

- **開発フローがドキュメント化されていない**  
  デプロイや運用の“正解の手順”が散らばっており、  
  人が増えた時に再現性が出ない構造になっていました。

- **開発からデプロイまでの一連の流れの自動化が少ない**  
  「誰がやっても同じように進められる」状態からは遠く、  
  エンジニア数を増やしても開発スピードが伸びないと感じました。

これからシリーズCを目指すにあたり、  
この状態のままだとエンジニア数を増やしても組織としての速度が上がらない。  
**各々が自律的に、非同期で、複数人が同時に開発できる環境が必要**だと考えました。

<!-- 画像②ここ：課題のBefore状態を視覚化 -->
<!-- 内容指示：
「Beforeの辛さ」を伝える図 or 1枚スクショ。
例）
- リポジトリがバラバラでCI/CDもバラついてた様子を簡単に図示
- 監視Slackチャンネル70個が並ぶ一覧の一部スクショ（多すぎ感が伝わる程度にモザイクでもOK）
読者が“一撃でヤバさを理解できる”絵が良い。 -->
<!-- 例：
![Before: 分散していたリポジトリ/運用/監視](https://...png)
-->

---

## 2025年の方針（どうやるか／何を優先したか）

今年の基盤整備は、以下の方針を軸に進めました。

- **「入社時にあるといいな」を揃える**  
  新しく入った人が迷わない・止まらない構造をつくる。

- **非同期で複数人が開発できる状態を作る**  
  人数が増えたときに“自然にスケールする型”に寄せる。

- **自分が抜けても残せる仕組みを作る**  
  属人性を減らし、決定や運用が積み上がるようにする。

具体的には、次のような状態を目指しました。

- 開発からデプロイまでの一連の流れを言語化できている  
- 自動化された開発フローがある  
- 設計思想や意思決定がドキュメントとして残り、辿れる  

---

## やったこと

### 1. コードとリポジトリを“理解しやすい形”に再編した

#### GitLab から GitHub へ移行
創業期から使ってきたGitLabからGitHubへ移行しました。

**一番ハマった点**は、  
創業期のコミット内に**数GBに及ぶ巨大ファイル**が混ざっていたことです。  
GitHubは100MiBを超えるファイルを禁止しているので、これに引っかかりました。  
該当履歴を潰した上で移行しています。

参考：[GitHubの大きなファイルに関する制限](https://docs.github.com/ja/repositories/working-with-files/managing-large-files/about-large-files-on-github)

移行は“ただのリポジトリ引越し”ではなく、  
**過去の負債や不整合を表に出して整理するイベント**だと痛感しました。

#### マルチリポジトリから集約へ（20リポジトリ→5リポジトリ）
過去はサービスごとにリポジトリを切っていましたが、  
リポジトリごとにCI/CDや運用方法の整備が大きくばらつき、さらに

- 1人のメンテナが複数のリポジトリを跨いで触る
- 各リポジトリとに環境セットアップが必要  
- リポジトリが増えすぎて全体像が不明瞭  

といった問題が出ていました。

また、IaC化などで連携するシステム間の関係が増えてきたフェーズでは、  
**まとめて記述できるほうが自然**という事情もありました。

結果として、リポジトリ数を**約20→5つに集約**しました  
（厳密にはフルのモノリポジトリというより"集約寄りの形"ですが、目的は十分果たせています）。

#### “ブランチデプロイで稼働中”のシステムを棚卸し
これも衝撃だったのですが、  
**mainに取り込まないままブランチでデプロイされ、稼働しているシステムが複数**見つかりました。

ブランチ運用だと、後から来た人は存在に気づきにくい。  
“見えない資産”を増やしてしまう構造だったので、  
別ファイルとして書き起こし、main側に移し替えて整理しました。

<!-- 画像③ここ：リポジトリ整理のBefore/After -->
<!-- 内容指示：
「20リポジトリ→5リポジトリ」の変化を図で見せる。
例）
- 左に小さな箱が20個並ぶイメージ
- 右に5個（または集約先）を並べる
＋「CI/CDやドキュメント共通化が進む」矢印
絵としてシンプルでOK。 -->
<!-- 例：
![リポジトリ構成のBefore/After](https://...png)
-->

---

### 2. 稼働システムとAWS構成を“今の現実”に揃えた

#### IaCの整備（Terraform化）
稼働中システムのAWS構成をTerraformでIaC化しました。  
ただ、既存リソースの取り込み(import)は想像以上に大変でした。

- 一時的に設定したもの  
- 理由不明な設定  
- メンテナ不在で放置されていた構成  
- Terraformを使うがステートは破棄する、といった“擬似IaC”運用  

こうしたものが多く、**単にimportするだけでは終わらない**。  
1つ1つ調べたり、関係者に聞いたりして潰していく必要があり、かなり骨が折れる作業でした。

ただ、このプロセスの中で  
**「今何が動いていて、どんな理由でそうなっているか」** が明確になったのは、  
組織にとって大きな資産になったと思います。

#### 不要リソースの棚卸しと削除
IaC化と並行して、不要になったAWSリソースを棚卸して削除しました。  
この手の整理はコスト削減だけでなく、**理解コストの削減効果が非常に大きい**と感じます。

#### 途中になっていた旧→新システム移行の完了
移行が途中で止まっていた系のシステムを片付け、  
旧システムを削除できる状態まで持っていきました。  
複数バージョンが共存し続けることで混乱が生じていたため、  
これを解消できたのは全体像の把握に直結しました。

#### プロダクト間の責任境界整理（AWSアカウント整理）
プロダクト単位の責任境界を整理し、

- AWSアカウント作成  
- クロスアカウント構成廃止  

など、スケールしやすい構造に寄せました。

#### メンテナ不在システムの引き継ぎ
開発途中でメンテナ不在になっていたシステムの  
IaC化・デプロイ自動化を整備した上で引き継ぎできる状態にしました。  
「誰でも触れる」をシステム単位で実現していくイメージです。

<!-- 画像④ここ：AWS/IaCの整理イメージ -->
<!-- 内容指示：
Terraform化やAWSアカウント整理の“全体像が整った感”を伝える図。
例）
- 「Before: 手動/謎設定/クロスアカウント」→「After: Terraformで一元管理/責任境界明確」
- AWSアカウント境界の簡単な図（プロダクトごとに箱を分ける）
外部公開が難しい場合は抽象化した構成図でOK。 -->
<!-- 例：
![AWS/IaCのBefore/After概念図](https://...png)
-->

---

### 3. CI/CDを“再現性と自動化”に寄せた

GitHub Actionsを軸に、CI/CDを整えました。

- **デプロイの自動化**
  - workflow_dispatchでワンタッチデプロイ
  - イメージビルド→デプロイまで一気通貫
  - 半年前は手元やManagement Consoleからの手動デプロイが中心でしたが、現在はGitHub Actionsによるボタン1つのデプロイが主流になっています
  - 「毎回やり方を調べる」状態から脱却

- **lint / テストの自動化**
  - CIで必ず回るレールを作り、あとからテストが増やせる状態に

- **IaCの自動適用**
  - PRマージ時にTerraform plan/applyを自動化
  - 本番環境への手動applyはなくなりました
  - AWSアカウント / GitHubリポジトリの作成も同じ仕組みに寄せられています

- **共通Workflowの整備**
  - ECRへのpushなど共通化できる部分を切り出し
  - 各サービスで再利用できるように

人数が増えたあとに効くのは、個別の自動化よりも  
**「共通のやり方があること」** だと思っています。

<!-- 画像⑤ここ：CI/CDフローの図 -->
<!-- 内容指示：
「PR → 自動テスト → build → deploy(workflow_dispatch) → Slack通知」
みたいな一本道フローを図にする。
workflow_dispatchや共通Workflowが効いてる点を矢印付きで書くと伝わりやすい。 -->
<!-- 例：
![GitHub Actionsによる開発〜デプロイの流れ](https://...png)
-->

---

### 4. 意思決定と運用品質を“積み上がる仕組み”にした

#### ADR導入と意思決定のドキュメント化
ADR（Architecture Decision Record）を導入し、  
些細なことでも意思決定した内容は残す文化にしました。

AIや文字起こしを活用し、  
ドキュメントに残す心理的・作業的コストを極力下げています。

#### システムドキュメントをGitHubへ集約
Notionも活用しつつ、  
**システムドキュメントはGitHubに集約する**意思決定をしました。

理由は、

- コードベースに近い場所に置いたほうが自然  
- AIがコードベースを理解する際にも役立つ  

と考えたためです。

#### 監視アラートの整理とNewRelic導入
監視アラートは、実際に洗い出してみると  
**Slackチャンネルが70個**も分散していました。

しかも、川のように通知が流れ続けているチャンネルもあり、  
“監視がノイズ化している”状態でした。  
加えて「システムが直接Slackに通知する設計」がはびこっており、  
システムのデプロイ方法を知らないとアラートの改善すらできない構造になっていました。

そこで、まず

- **アラートはCloudWatchなどメトリクスを通じてSlackへ通知する**

という方向性を決め、
不要なものを棚卸して**20個を削除し、50個まで削減**しました。
システム改修が必要なものは引き続き対応していきます。

またNewRelicを導入し、  
エッジデバイスなどこれまで見えていなかった領域の監視も追加しています。

#### 開発フロー整備とAI活用
- PRを用いたコードレビューの徹底
- 人手不足を補うためのAIコードレビュー
- Slackにリリースチャンネルを作り、リリース情報の周知フローを整備

リリースが可視化されたことで、
不具合のFBがすぐ上がる・原因特定が速くなるなど、運用品質にも効いています。

AIは GitHub Copilot / Claude Code / Gemini 等を試しながら
**個人技をチーム標準にしていく**準備を始めています。

#### 監視・運用に関する輪読会の定期開催
監視や運用の目線合わせを行うために、部署で輪読会を定期的に開催しています。
具体的には以下のような書籍を読み、チーム全体で知識を共有しています。

- [SREを始めよう](https://www.oreilly.co.jp/books/9784814400904/)
- [Terraformではじめる実践IaC](https://www.oreilly.co.jp/books/9784814400133/)
- [システム運用アンチパターン](https://www.oreilly.co.jp//books/9784873119847/)
- [チームの力で組織を動かす――ソフトウェア開発を加速するチーム指向の組織設計](https://gihyo.jp/book/2025/978-4-297-15064-8)

これにより、個人の知見を組織全体の共通認識として積み上げていく文化が育ち始めています。

<!-- 画像⑥ここ：ADR/ドキュメントの“積み上がり”感 -->
<!-- 内容指示：
ADRの実例スクショ（機密伏せたタイトルだけでもOK）や、
「決定→ADR→参照される」の循環を1枚で示す。
Zenn読者に“使える文化”として伝わる絵が良い。 -->
<!-- 例：
![ADRで意思決定が積み上がる仕組み](https://...png)
-->

---

## 結果：何がどう変わったか

これらは特定個人ではなく、開発部門全体で進めてきた取り組みです。

正社員／業務委託含め、現在**15名以上**で開発が進んでおり、  
入社時の2倍以上の人数になりました。

基盤整備の効果として、体感でも実務でも以下が起きています。

- **新規メンバー参画時に、アカウント発行の手続きがスムーズになった**
- **デプロイの失敗や異常にすぐ気づけるようになった**
  - GitHub Actionsの共通Workflowを通じてSlack通知され、可視化が進んだ  
- **質問対応でADRやドキュメントを紹介するケースが増えた**
  - 何度も同じ説明をする負担が減った  

また、Dev Container導入も進めており、  
ローカル開発環境のセットアップがさらに容易になりつつあります。

CI/CDの自動テストが整備されてきたことで、  
テストコードが徐々に増え、意図しない仕様変更の防止にも繋がっています。

まだ完全にやりきれていない部分はありますが、  
**「人数が増えても回る形」へ、着実に近づいている**手応えがあります。

<!-- 画像⑦ここ：Before/Afterまとめ表 -->
<!-- 内容指示：
本文で出てきた変化を1枚にまとめた表 or 図。
例）
- リポジトリ: 20 → 5
- Deploy: 手動/都度調査 → workflow_dispatch
- Terraform: 手動apply → PRマージでplan/apply
- Alert: 70ch → 50ch（不要20削除）
数字が一発で入る“まとめ絵”が強い。 -->
<!-- 例：
![2025年のBefore/Afterサマリー](https://...png)
-->

---


## おわりに

2025年は、目に見える新機能よりも、  
将来の速度と信頼性を支える土台づくりに時間を使いました。

正直、短期的には地味で、成果が伝わりにくい取り組みも多かったと思います。  
でも今、人数が増えても開発が回り、意思決定が積み上がり、  
デプロイや運用が一定の再現性で動き始めています。

“守り”はようやく効き始めたところ。  
2026年はこの土台の上で、さらにプロダクトと組織を加速させていきます。

ここまで読んでいただきありがとうございました！  
OptFitでは一緒にこのフェーズを作っていく仲間も探しているので、興味があればぜひ。